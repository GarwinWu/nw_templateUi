!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.EimMobileJsSdk=t()}(this,function(){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),s=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)},t=function(){function t(e){n(this,t),this.protocolSwitch=e||"new"}return i(t,[{key:"firstUpperCase",value:function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,function(e){return e.toUpperCase()})}},{key:"randomId",value:function(e){e=e||10;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",o=t.length,n="",i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*o));return n}},{key:"judge",value:function(){return-1<window.navigator.userAgent.indexOf("eimAndroid")?"eimAndroid":"eimiOS"}},{key:"judgePlatform",value:function(){var e=navigator.userAgent.toLowerCase(),t="iphone os"==e.match(/iphone os/i),o="android"==e.match(/android/i);return t?"iOS":o?"Android":""}},{key:"getOption",value:function(e){return Object.assign({},this.opts,e)}},{key:"toJSON",value:function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(e){return t}return t}},{key:"getCallbackName",value:function(e,t,o){var n=this.firstUpperCase(e),i=o?this.firstUpperCase(o):this.firstUpperCase(this.randomId(6));return t?"success"===t?"eimMobileJsSdk"+n+i+"Success":"eimMobileJsSdk"+n+i+"Faile":"eimMobileJsSdk"+n+i+"Fn"}},{key:"getProtocol",value:function(e,t,o,n){for(var i="",c="",a=arguments.length,s=Array(4<a?a-4:0),r=4;r<a;r++)s[r-4]=arguments[r];if("old"===e){c=s.join("_");var l=t.split("_");if(i="eim://"+l[0]+"_"+o+"_"+n,1<l.length)for(var h=1;h<t.split("_").length;h++)i+="_"+l[h];i+="/"+c}else i=(c=s.join("&"))?"eim://com.comtop.eim/"+t+"?succallback="+o+"&failcallback="+n+"&"+c:"eim://com.comtop.eim/"+t+"?succallback="+o+"&failcallback="+n;return i}},{key:"getProtocolSync",value:function(e,t){for(var o="",n="",i=arguments.length,c=Array(2<i?i-2:0),a=2;a<i;a++)c[a-2]=arguments[a];if("old"===e){n=c.join("_");var s=t.split("_");if(o="eim://"+s[0],1<s.length)for(var r=1;r<t.split("_").length;r++)o+="_"+s[r];o+="/"+n}else o=(n=c.join("&"))?"eim://com.comtop.eim/"+t+"?"+n:"eim://com.comtop.eim/"+t+"?";return o}},{key:"createCallbackFactory",value:function(e,t){var o=this.getCallbackName(t,"success",e.id),n=this.getCallbackName(t,"fail",e.id);return window[o]=e.success,window[n]=e.fail,{suc:o,fail:n}}},{key:"createCallbackFn",value:function(e,t,o){var n=void 0;return n=/success|fail/.test(o)?this.getCallbackName(t,o,e.id):this.getCallbackName(t+o,"",e.id),window[n]=e[o],n}},{key:"createProtocol",value:function(e,t,o){if(!("new"===o&&"has no this protocol"===e||"old"===o&&"has no this protocol"===t)){var n="new"===o?e:t;if("undefined"!=typeof comtopJssdk||window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.comtopJssdk){var i=this.judgePlatform();"iOS"===i?window.webkit.messageHandlers.comtopJssdk.postMessage(n):"Android"===i&&comtopJssdk.exc(n,!1)}else window.location.href=n}}},{key:"createProtocolPrompt",value:function(e,t,o){"new"===o&&"has no this protocol"===e||"old"===o&&"has no this protocol"===t||prompt("new"===o?e:t)}},{key:"createProtocolSync",value:function(e,t,o){if(!("new"===o&&"has no this protocol"===e||"old"===o&&"has no this protocol"===t)){var n=prompt("new"===o?e:t);return this.toJSON(n)}}},{key:"createSimpleJssdkFuncFactory",value:function(e,t,o,n){var i=this.getOption(e),c=this.createCallbackFactory(i,t),a=""===o?"has no this protocol":this.getProtocol("new",o,c.suc,c.fail),s=""===n?"has no this protocol":this.getProtocol("old",n,c.suc,c.fail);this.createProtocol(a,s,this.protocolSwitch)}},{key:"createSimpleJssdkFuncFactorySync",value:function(e,t){var o=""===e?"has no this protocol":this.getProtocolSync("new",e),n=""===t?"has no this protocol":this.getProtocolSync("old",t);return this.createProtocolSync(o,n,this.protocolSwitch)}},{key:"createSingleParamJssdkFuncFactory",value:function(e,t,o,n,i,c){var a=this.createCallbackFactory(e,t),s=""===o?"has no this protocol":this.getProtocol("new",o,a.suc,a.fail,n),r=""===i?"has no this protocol":this.getProtocol("old",i,a.suc,a.fail,c);this.createProtocol(s,r,this.protocolSwitch)}},{key:"createSingleParamJssdkFuncFactorySync",value:function(e,t,o,n,i){var c=""===t?"has no this protocol":this.getProtocolSync("new",t,o),a=""===n?"has no this protocol":this.getProtocolSync("old",n,i);return this.createProtocolSync(c,a,this.protocolSwitch)}},{key:"createParams",value:function(e,t){var o=[];return e.forEach(function(e){o.push(e+"="+(encodeURIComponent(t[e])||""))}),o}},{key:"createProtocolParams",value:function(e,n){var i=this,c=this.getOption(n),a=e.replace(/\/|\./g,""),t=this.createCallbackFactory(c,a),s=[],r=[];return Object.keys(n).forEach(function(e){if("function"!=typeof n[e])r.push(e);else if(!/success|fail/.test(e)){var t=(""+e).toLowerCase(),o=i.createCallbackFn(c,a,t);s.push(e+"="+o)}}),{keys:r,otherCallbackArr:s,callbackname:t}}},{key:"assembleOptions",value:function(e,t){var o=[];if(e)for(var n in e)if(null!==e[n]&&void 0!==e[n]){if(!e[n].constructor||!e[n].constructor.name)throw new Error("请传入正确的参数");switch(e[n].constructor.name){case"Function":o.push(n+"="+encodeURIComponent(this.createExtendWindowCallback(t,e[n],"options")));break;case"Array":case"Object":o.push(n+"="+encodeURIComponent(JSON.stringify(e[n])));break;case"Date":o.push(n+"="+encodeURIComponent(e[n].getTime()));break;case"String":case"Number":case"Boolean":o.push(n+"="+encodeURIComponent(e[n]));break;default:throw new Error("key-value的参数 "+n+" 取值的数据类型仅限于Function、Array、Object、String、Number、Boolean，请设置正确的数据类型")}}else o.push(n+"=");return o}},{key:"createExtendWindowCallback",value:function(e,t,o){var n=this.firstUpperCase(this.randomId(6)),i="jssdkExtension_"+e+"_"+t.name+"_"+o+"_"+n;return window[i]=t,i}}]),t}();return function(e){function o(e){n(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.protocolSwitch=e||"new",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,t),i(o,[{key:"callMobileJsSdk",value:function(e,t){if(!e)throw new Error("传入空的path："+e);if("string"!=typeof e)throw new Error("请传入正确的jssdk协议路径");if(t&&!(t instanceof Object))throw new Error("请传入正确的jssdk对象参数，已输入参数对象opt："+t);var o=this.createProtocolParams(e,t),n=o.callbackname,i=o.keys,c=o.otherCallbackArr,a="";a=0===c.length?this.getProtocol.apply(this,["new",e,n.suc,n.fail].concat(s(this.createParams(i,t)))):this.getProtocol.apply(this,["new",e,n.suc,n.fail].concat(s(c),s(this.createParams(i,t)))),this.createProtocol(a,"has no this protocol",this.protocolSwitch)}},{key:"extendMobileJssdk",value:function(e,t,o){if(!e)throw new Error("请初始化插件扩展对象");if(!t)throw new Error("请传入action参数");if(o&&"Object"!==o.constructor.name)throw new Error("参数必须为Object类型");var n=void 0,i=void 0;if(o.success){if("function"!=typeof o.success)throw new Error("请配置成功回调success，且成功回调必须是function");n=this.createExtendWindowCallback(t,o.success,"success")}if(o.fail){if("function"!=typeof o.fail)throw new Error("请配置失败回调fail，且失败回调必须是function");i=this.createExtendWindowCallback(t,o.fail,"fail")}var c="eim://com.comtop.eim/extension/"+e+"?action="+t+"&succallback="+n+"&failcallback="+i;delete o.success,delete o.fail;var a=this.assembleOptions(o,t);a&&0<a.length&&(c+="&"+a.join("&")),console.log("extendMobileJssdk",c),this.createProtocol(c,"",this.protocolSwitch)}},{key:"selectPhoto",value:function(e){var t=this.getOption(e),o=t.count?t.count:1,n=t.isNeedVideo,i=0===t.singleCrop?t.singleCrop:1,c=this.createCallbackFactory(t,"selectPhoto");this.createProtocol(this.getProtocol("new","photo/select",c.suc,c.fail,"limit="+encodeURIComponent(o),"singlecrop="+encodeURIComponent(i),"isNeedVideo="+encodeURIComponent(n)),this.getProtocol("old","selectPhoto",c.suc,c.fail,o,i,n),this.protocolSwitch)}},{key:"imcrop",value:function(e){var t=this.getOption(e),o=t.aspectratio?t.aspectratio:1,n=t.quality?t.quality:0,i=t.shotonly?t.shotonly:0,c=this.createCallbackFactory(t,"imcrop");this.createProtocol(this.getProtocol("new","system/imcrop",c.suc,c.fail,"aspectratio="+encodeURIComponent(o),"quality="+encodeURIComponent(n),"shotonly="+encodeURIComponent(i)),this.getProtocol("old","imcrop",c.suc,c.fail,o,n,i),this.protocolSwitch)}},{key:"selectUser",value:function(e,t){var o=this.getOption(e),n=o.maxLimit||99,i=this.createCallbackFactory(o,"selectUser"),c=o.ignoreself?"/ignoreSelf":"",a=o.ignoreself?1:0,s=o.selecteduids&&0!==o.selecteduids.length?""+o.selecteduids.join("_"):"",r=o.selecteduids&&0!==o.selecteduids.length?""+o.selecteduids.join(","):"",l=t?"user/selectUserWith4A":"user/select";this.createProtocol(this.getProtocol("new",l,i.suc,i.fail,"maxlimit="+encodeURIComponent(n),"ignoreself="+encodeURIComponent(a),"selecteduids="+encodeURIComponent(r)),t?"has no this protocol":this.getProtocol("old","selectUser_"+n,i.suc,i.fail,""+s+c),this.protocolSwitch)}},{key:"select4AUser",value:function(e){this.selectUser(e,!0)}},{key:"selectDept",value:function(e){var t=this.getOption(e),o=t.maxLimit||99,n=this.createCallbackFactory(t,"selectDept"),i=t.ignoreself?"/ignoreself":"",c=t.ignoreself?1:0,a=t.selectedids&&0!==t.selectedids.length?t.selectedids.join("_"):"",s=t.selectedids&&0!==t.selectedids.length?""+t.selectedids.join(","):"";this.createProtocol(this.getProtocol("new","dept/select",n.suc,n.fail,"maxlimit="+encodeURIComponent(o),"ignoreself="+encodeURIComponent(c),"selectedids="+encodeURIComponent(s)),this.getProtocol("old","selectDept_"+o,n.suc,n.fail,""+a+i),this.protocolSwitch)}},{key:"screenRotation",value:function(e){var t=this.getOption(e),o=t.param?t.param:"vertical",n=this.createCallbackFactory(t,"screenRotation");this.createProtocol(this.getProtocol("new","system/screen",n.suc,n.fail,"action="+encodeURIComponent(o)),this.getProtocol("old","screenRotation",n.suc,n.fail,""+o),this.protocolSwitch)}},{key:"phoneCall",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"phoneCall","system/phonecall","phonenum="+encodeURIComponent(t.phoneNumber),"phoneCall",t.phoneNumber)}},{key:"openQRCode",value:function(e){var t=this.getOption(e),o=t.needResult?t.needResult:1;this.createSingleParamJssdkFuncFactory(t,"openQRCode","qrcode/scan","needresult="+encodeURIComponent(o),"openQRCode",o)}},{key:"scanQRCode",value:function(e){var t=this.getOption(e),o=1===t.needResult||0===t.needResult?t.needResult:1,n=0===parseInt(t.album,10)?0:1,i=this.createCallbackFactory(t,"scanQRCode");this.createProtocol(this.getProtocol("new","qrcode/scan",i.suc,i.fail,"needresult="+encodeURIComponent(o),"album="+encodeURIComponent(n)),"has no this protocol",this.protocolSwitch)}},{key:"openEditText",value:function(e){var t=this.getOption(e),o=t.text?t.text:"发送",n=t.type?t.type:"number",i=t.content,c=this.createCallbackFactory(t,"openEditText");this.createProtocol(this.getProtocol("new","web/input/text",c.suc,c.fail,"type="+encodeURIComponent(n),"text="+encodeURIComponent(o),"content="+encodeURIComponent(i)),this.getProtocol("old","openEditText",c.suc,c.fail,o,n,i),this.protocolSwitch)}},{key:"openFile",value:function(e){var t=this.getOption(e),o=t.fileStr;this.createSingleParamJssdkFuncFactory(t,"openFile","file/open","json="+encodeURIComponent(o),"openFile",o)}},{key:"uploadFile",value:function(e){var t=this.getOption(e),o=t.fileStr;this.createSingleParamJssdkFuncFactory(t,"uploadFile","file/upload","json="+encodeURIComponent(o),"uploadFile",o)}},{key:"previewFile",value:function(e){var t=this.getOption(e),o=t.fileStr;this.createSingleParamJssdkFuncFactory(t,"previewFile","file/preview","json="+encodeURIComponent(o),"previewFile",o)}},{key:"getFileDownloadList",value:function(e){var t=this.getOption(e),o=t.fileStr;this.createSingleParamJssdkFuncFactory(t,"getFileDownloadList","file/getdownloadlist","json="+encodeURIComponent(o),"getFileDownloadList",o)}},{key:"menuList",value:function(e){var t=this.getOption(e),o=t.menulist&&0!==t.menulist.length?t.menulist.join("_"):"",n=t.menulist&&0!==t.menulist.length?t.menulist.join(","):"";this.createSingleParamJssdkFuncFactory(t,"menuList","menu/list","menulist="+encodeURIComponent(n),"menuList",o)}},{key:"onMenu",value:function(e){var t=this.getOption(e),o=t.type;this.createSingleParamJssdkFuncFactory(t,"onMenu","web/menu/action","name="+encodeURIComponent(o),"onMenu",o)}},{key:"logout",value:function(e){this.createSimpleJssdkFuncFactory(e,"logout","user/logout","logout")}},{key:"closeWindow",value:function(e){var t="eimAndroid"===this.judge()?"closecurrentwindow":"closeWindow";this.createSimpleJssdkFuncFactory(e,"closeWindow","web/close",t)}},{key:"banPull",value:function(e){var t=this.getOption(e),o=t?t.pull:"";this.createSingleParamJssdkFuncFactory(t,"banPull","web/banpull","pull="+encodeURIComponent(o),"banPull",null)}},{key:"goBack",value:function(e){var t="eimAndroid"===this.judge()?"closeWindow":"goBack";this.createSimpleJssdkFuncFactory(e,"goBack","web/goback",t)}},{key:"hiddenNavigationBar",value:function(e){var t=this.getOption(e),o=t?t.action:"";this.createSingleParamJssdkFuncFactory(t,"hiddenNavigationBar","web/navigationbar/toggler","action="+encodeURIComponent(o),"hiddenNavigationBar",null)}},{key:"closeShouldAutorotate",value:function(e){this.createSimpleJssdkFuncFactory(e,"closeShouldAutorotate","system/closerotate","closeShouldAutorotate")}},{key:"clipBoard",value:function(e){var t=this.getOption(e),o=t.text;this.createSingleParamJssdkFuncFactory(t,"clipBoard","system/clipboard","content="+encodeURIComponent(o),"clipBoard",o)}},{key:"refreshPubService",value:function(e){var t=this.getOption(e),o=t.action;this.createSingleParamJssdkFuncFactory(t,"refreshPubService","pubservice/refresh","action="+encodeURIComponent(o),"refreshpubservice",o)}},{key:"setEarpieceMode",value:function(e){this.createSimpleJssdkFuncFactory(e,"setEarpieceMode","system/earpiece","setEarpieceMode")}},{key:"isInstalled",value:function(e){var t=this.getOption(e),o=t.packageName;this.createSingleParamJssdkFuncFactory(t,"isInstalled","app/installed","name="+encodeURIComponent(o),"isInstalled",o)}},{key:"choosePhoto",value:function(e){var t=this.getOption(e),o=t.maxLimit;this.createSingleParamJssdkFuncFactory(t,"choosePhoto","photo/choose","maxlimit="+o,"choosePhoto",o)}},{key:"setTitleVisibility",value:function(e){var t=this.getOption(e),o=t.isShow||void 0===t.isShow?"visible":"gone",n=this.createCallbackFactory(t,"groupCreate");this.createProtocol("has no this protocol",this.getProtocol("old","setTitleVisibility",n.suc,n.fail,o),this.protocolSwitch)}},{key:"playVideo",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"playVideo","video/play","json="+encodeURIComponent(t.videoJson),"playVideo",t.videoJson)}},{key:"showVoiceInput",value:function(e){this.createSimpleJssdkFuncFactory(e,"showVoiceInput","voice/input","showVoiceInput")}},{key:"openZoom",value:function(e){this.createSimpleJssdkFuncFactory(e,"openZoom","system/zoom","openZoom")}},{key:"getLocation",value:function(e){this.createSimpleJssdkFuncFactory(e,"getLocation","system/getlocation","getLocation")}},{key:"groupCreate",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"groupCreate");this.createProtocol(this.getProtocol("new","group/create",o.suc,o.fail,"groupname="+encodeURIComponent(t.groupname),"groupmark="+encodeURIComponent(t.groupmark)),this.getProtocol("old","groupCreate",o.suc,o.fail),this.protocolSwitch)}},{key:"dissolve",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"dissolve","group/dissolve","roomid="+encodeURIComponent(t.roomId),"groupDissolveWithRoomId",t.roomId)}},{key:"groupOpen",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"groupOpen","group/open","roomid="+encodeURIComponent(t.roomId),"groupOpenWithRoomId",t.roomId)}},{key:"groupExit",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"groupExit","group/exit","roomid="+encodeURIComponent(t.roomId),"exitGroup",t.roomId)}},{key:"refreshMyInfo",value:function(e){this.createSimpleJssdkFuncFactory(e,"refreshMyInfo","user/refreshself","refreshMyInfo")}},{key:"showUserInfoWithUserId",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"showUserInfoWithUserId","user/showinfo","userid="+encodeURIComponent(t.userId),"showUserInfoWithUserId",t.userId)}},{key:"openApp",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"openApp","app/open","appid="+encodeURIComponent(t.appId),"openApp",t.appId)}},{key:"shareWebMessage",value:function(e){this.createSimpleJssdkFuncFactory(e,"shareWebMessage","web/share","shareWebMessage")}},{key:"getLocalWifiIP",value:function(e){this.createSimpleJssdkFuncFactory(e,"getLocalWifiIP","system/wifi/getip","getLocalWifiIP")}},{key:"getLocalWifiMac",value:function(e){this.createSimpleJssdkFuncFactory(e,"getLocalWifiMac","system/wifi/getmac","getLocalWifiMac")}},{key:"imcropUpload",value:function(e){var t=this.getOption(e),o=t.aspectratio?t.aspectratio:1;this.createSingleParamJssdkFuncFactory(t,"imcropUpload","system/imcrop/upload","aspectratio="+encodeURIComponent(o),"",{})}},{key:"showUserInfo",value:function(e){this.createSimpleJssdkFuncFactory(e,"getCurrentUserInfo","user/current/info","")}},{key:"sendCardToChat",value:function(e){var t=this.getOption(e),o=t.from,n=t.title,i=t.des,c=t.cover,a=t.link,s=this.createCallbackFactory(t,"sendCardToChat");this.createProtocol(this.getProtocol("new","chat/select/send/message",s.suc,s.fail,"from="+encodeURIComponent(o),"title="+encodeURIComponent(n),"des="+encodeURIComponent(i),"cover="+encodeURIComponent(c),"link="+encodeURIComponent(a)),"has no this protocol",this.protocolSwitch)}},{key:"sendCardToUser",value:function(e){var t=this.getOption(e),o=t.from,n=t.userid,i=t.title,c=t.des,a=t.cover,s=t.link,r=this.createCallbackFactory(t,"sendCardToUser");this.createProtocol(this.getProtocol("new","user/send/appmessage",r.suc,r.fail,"from="+encodeURIComponent(o),"userid="+encodeURIComponent(n),"title="+encodeURIComponent(i),"des="+encodeURIComponent(c),"cover="+encodeURIComponent(a),"link="+encodeURIComponent(s)),"has no this protocol",this.protocolSwitch)}},{key:"getImei",value:function(e){this.createSimpleJssdkFuncFactory(e,"getImei","system/imei","")}},{key:"audio",value:function(e){var t=this.getOption(e),o=t.action;this.createSingleParamJssdkFuncFactory(t,"audio","audio/record","action="+encodeURIComponent(o),"",{})}},{key:"audioPlay",value:function(e){var t=this.getOption(e),o=t.action,n=t.fileUrl,i=this.createCallbackFactory(t,"audioPlay");this.createProtocol(this.getProtocol("new","audio/play",i.suc,i.fail,"fileurl="+encodeURIComponent(n),"action="+encodeURIComponent(o)),"has no this protocol",this.protocolSwitch)}},{key:"openThirdApp",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"openThirdApp");this.createProtocol(this.getProtocol("new","open/thirdapp",o.suc,o.fail,"pkg="+encodeURIComponent(t.pkg),"scheme="+encodeURIComponent(t.scheme)),"has no this protocol",this.protocolSwitch)}},{key:"uploadAttachment",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"uploadAttachment");this.createProtocol(this.getProtocol("new","upload/attachment",o.suc,o.fail,"url="+encodeURIComponent(t.url),"key="+encodeURIComponent(t.key),"value="+encodeURIComponent(t.value)),"has no this protocol",this.protocolSwitch)}},{key:"selectMedia",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"selectMedia","media/select","limit="+encodeURIComponent(t.limit),"",{})}},{key:"uploadMedia",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"uploadMedia");this.createProtocol(this.getProtocol.apply(this,["new","media/upload",o.suc,o.fail].concat(s(this.createParams(["headers","params","filekey","url","fileurl"],e)))),"has no this protocol",this.protocolSwitch)}},{key:"ajax",value:function(e){this.ajaxComm(e,"system/network","ajax")}},{key:"ajax2",value:function(e){this.ajaxComm(e,"system/network2","ajax2")}},{key:"ajaxComm",value:function(e,t,o){var n=this.getOption(e),i=this.createCallbackFactory(n,o),c=encodeURIComponent(n.url),a=encodeURIComponent(n.cookieType),s=encodeURIComponent(n.timeout),r=n.method&&/^get|post|put|delete$/.test(n.method.toLowerCase())?n.method.toLowerCase():"get",l={},h=JSON.stringify({});try{l=JSON.stringify(n.data)}catch(e){l=h}var p={};try{p=JSON.stringify(n.header)}catch(e){p=h}var u=n.returnResponseHeader?1:0;this.createProtocol(this.getProtocol("new",t,i.suc,i.fail,"url="+c,"data="+encodeURIComponent(l),"method="+encodeURIComponent(r),"header="+encodeURIComponent(p),"is_return_response_without_cookie="+encodeURIComponent(u),"cookie_type="+a,"timeout="+s),"has no this protocol",this.protocolSwitch)}},{key:"ajaxGateway",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"ajaxGateway"),n=encodeURIComponent(t.url),i=t.method&&/^get|post|put|delete$/.test(t.method.toLowerCase())?t.method.toLowerCase():"get",c=t.appKey||"",a=t.appSecret||"",s=t.ekey||"",r={},l=JSON.stringify({});try{r=JSON.stringify(t.data||"")}catch(e){r=l}var h={};try{h=JSON.stringify(t.header)}catch(e){h=l}var p=t.returnResponseHeader?1:0;this.createProtocol(this.getProtocol("new","system/gateway",o.suc,o.fail,"url="+n,"data="+encodeURIComponent(r),"method="+encodeURIComponent(i),"appkey="+encodeURIComponent(c),"appsecret="+encodeURIComponent(a),"ekey="+encodeURIComponent(s),"header="+encodeURIComponent(h),"is_return_response_without_cookie="+encodeURIComponent(p)),"has no this protocol",this.protocolSwitch)}},{key:"ssoLogin",value:function(e){this.createSimpleJssdkFuncFactory(e,"ssoLogin","appstore/sso","")}},{key:"kv",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"kv");"get"===t.action||"delete"===t.action?this.createProtocol(this.getProtocol("new","system/kv",o.suc,o.fail,"action="+encodeURIComponent(t.action),"key="+encodeURIComponent(t.key)),"has no this protocol",this.protocolSwitch):this.createProtocol(this.getProtocol("new","system/kv",o.suc,o.fail,"action="+encodeURIComponent(t.action),"key="+encodeURIComponent(t.key),"value="+encodeURIComponent(t.value)),"has no this protocol",this.protocolSwitch)}},{key:"kvSync",value:function(e){var t=this.getOption(e);return"get"===t.action||"delete"===t.action?this.createProtocolSync(this.getProtocolSync("new","system/kv","action="+encodeURIComponent(t.action),"key="+encodeURIComponent(t.key)),"has no this protocol",this.protocolSwitch):this.createProtocolSync(this.getProtocolSync("new","system/kv","action="+encodeURIComponent(t.action),"key="+encodeURIComponent(t.key),"value="+encodeURIComponent(t.value)),"has no this protocol",this.protocolSwitch)}},{key:"network",value:function(e){this.createSimpleJssdkFuncFactory(e,"network","system/network/status","network")}},{key:"cache",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"cache","system/cache","action="+encodeURIComponent(t.action),"cache",t.action)}},{key:"cacheSync",value:function(e){var t=this.getOption(e);return this.createSingleParamJssdkFuncFactorySync(t,"system/cache","action="+encodeURIComponent(t.action),"cache",t.action)}},{key:"userAction",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"userAction");this.createProtocol(this.getProtocol("new","app/userAction",o.suc,o.fail,"actionCode="+encodeURIComponent(t.actionCode),"actionTime="+encodeURIComponent(t.actionTime),"actionResult="+encodeURIComponent(t.actionResult)),"has no this protocol",this.protocolSwitch)}},{key:"pushX",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"pushx","system/pushx","userid="+encodeURIComponent(t.userid),"pushx",t.userid)}},{key:"getDataFromThirdApp",value:function(e){this.createSimpleJssdkFuncFactory(e,"thirdApp","cache/thirdapp","")}},{key:"setcolor",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"setcolor");this.createProtocol(this.getProtocol("new","system/statusbar/setcolor",o.suc,o.fail,"value="+encodeURIComponent(t.value),"alpha="+encodeURIComponent(t.alpha),"titlecolor="+encodeURIComponent(t.titlecolor)),"has no this protocol",this.protocolSwitch)}},{key:"mapNavigateByBaidu",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"userAction");this.createProtocol(this.getProtocol("new","map/baidu/navigate",o.suc,o.fail,"location="+encodeURIComponent(t.location),"coord_type="+encodeURIComponent(t.coord_type),"query="+encodeURIComponent(t.query),"type="+encodeURIComponent(t.type),"via_points="+encodeURIComponent(t.via_points)),"has no this protocol",this.protocolSwitch)}},{key:"loginType",value:function(e){this.createSimpleJssdkFuncFactory(e,"loginType","appstore/loginType","loginType")}},{key:"vpnLinkedState",value:function(e){this.createSimpleJssdkFuncFactory(e,"vpnLinkedState","appstore/vpnLinkedState","vpnLinkedState")}},{key:"record",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"watermark");this.createProtocol(this.getProtocol("new","video/record",o.suc,o.fail,"quality="+encodeURIComponent(t.quality),"maxduration="+encodeURIComponent(t.maxduration)),"has no this protocol",this.protocolSwitch)}},{key:"watermark",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"watermark");this.createProtocol(this.getProtocol("new","safety/watermark",o.suc,o.fail,"content="+encodeURIComponent(t.content),"color="+encodeURIComponent(t.color),"alpha="+encodeURIComponent(t.alpha),"textsize="+encodeURIComponent(t.textsize)),"has no this protocol",this.protocolSwitch)}},{key:"keyboard",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"keyboard");this.createProtocol(this.getProtocol("new","safety/keyboard",o.suc,o.fail,"title="+encodeURIComponent(t.title),"content="+encodeURIComponent(t.content),"button_text="+encodeURIComponent(t.button_text)),"has no this protocol",this.protocolSwitch)}},{key:"selectSkyDriveFile",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"setcolor");this.createProtocol(this.getProtocol("new","skydrive/selectskydrivefile",o.suc,o.fail,"file="+encodeURIComponent(JSON.stringify(t.file))),"has no this protocol",this.protocolSwitch)}},{key:"selectSkyDriveFileForLink",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"setcolor");this.createProtocol(this.getProtocol("new","skydrive/selectskydrivefileforlink",o.suc,o.fail,"file="+encodeURIComponent(JSON.stringify(t.file))),"has no this protocol",this.protocolSwitch)}},{key:"opensystemurl",value:function(e){var t=this.getOption(e);this.createSingleParamJssdkFuncFactory(t,"opensystemurl","system/opensystemurl","url="+encodeURIComponent(t.url),"opensystemurl",t.url)}},{key:"getSystemVersion",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"setcolor");this.createProtocol(this.getProtocol("new","eimsystem/getsystemversion",o.suc,o.fail),"has no this protocol",this.protocolSwitch)}},{key:"getAppVersion",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"setcolor");this.createProtocol(this.getProtocol("new","eimsystem/getappversion",o.suc,o.fail),"has no this protocol",this.protocolSwitch)}},{key:"shareTextMsg",value:function(e){var t=this.getOption(e),o=t.text;this.createSingleParamJssdkFuncFactory(t,"shareTextMsg","eimsystem/sharetextmsg","text="+encodeURIComponent(o),"shareTextMsg",o)}},{key:"shoot",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"uploadMedia");this.createProtocol(this.getProtocol("new","system/shoot",o.suc,o.fail,"type="+encodeURIComponent(t.type),"limit="+encodeURIComponent(t.limit),"maxduration="+encodeURIComponent(t.maxduration)),"has no this protocol",this.protocolSwitch)}},{key:"isRoot",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"isRoot");this.createProtocol(this.getProtocol("new","system/check_root",o.suc,o.fail),"has no this protocol",this.protocolSwitch)}},{key:"isLocationFake",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"isLocationFake");this.createProtocol(this.getProtocol("new","system/check_location_fake",o.suc,o.fail),"has no this protocol",this.protocolSwitch)}},{key:"recognizer",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"recognizer"),n=this.createCallbackFn(t,"recognizer","volumecallback");this.createProtocol(this.getProtocol.apply(this,["new","media/speech/recognizer",o.suc,o.fail,"volumecallback="+n].concat(s(this.createParams(["action","accent","timeout","appid","apikey","secretkey"],e)))),"has no this protocol",this.protocolSwitch)}},{key:"print",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"print");this.createProtocol(this.getProtocol.apply(this,["new","system/print",o.suc,o.fail].concat(s(this.createParams(["name","orientation","top","left","bottom","right"],e)))),"has no this protocol",this.protocolSwitch)}},{key:"signature",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"signature");this.createProtocol(this.getProtocol.apply(this,["new","extension/signature",o.suc,o.fail].concat(s(this.createParams(["color","width"],e)))),"has no this protocol",this.protocolSwitch)}},{key:"attachmentUpload",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"attachmentUpload");this.createProtocol(this.getProtocol.apply(this,["new","media/upload",o.suc,o.fail].concat(s(this.createParams(["url","fileurl","filekey","headers","params"],e)))),"has no this protocol",this.protocolSwitch)}},{key:"baiduRoute",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"baiduRoute");this.createProtocol(this.getProtocol.apply(this,["new","map/baidu/route",o.suc,o.fail].concat(s(this.createParams(["origin","destination","mode","region","origin_region","destination_region","coord_type","index","target","car_type","viaPoints","sy","src"],e)))),"has no this protocol",this.protocolSwitch)}},{key:"gaodeNavigate",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"gaodeNavigate");this.createProtocol(this.getProtocol.apply(this,["new","map/gaode/navigate",o.suc,o.fail].concat(s(this.createParams(["poiname","lat","lon","dev","style"],e)))),"has no this protocol",this.protocolSwitch)}},{key:"gaodeRoute",value:function(e){var t=this.getOption(e),o=this.createCallbackFactory(t,"gaodeRoute");this.createProtocol(this.getProtocol.apply(this,["new","map/gaode/route",o.suc,o.fail].concat(s(this.createParams(["sid","slat","slon","sname","did","dlat","dlon","dname","dev","t","rideType"],e)))),"has no this protocol",this.protocolSwitch)}}]),o}()});
