!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.lbs=t():e.lbs=t()}(window,(function(){return function(e){var t=window.webpackHotUpdate_name_;window.webpackHotUpdate_name_=function(e,r){!function(e,t){if(!S[e]||!_[e])return;for(var r in _[e]=!1,t)Object.prototype.hasOwnProperty.call(t,r)&&(f[r]=t[r]);0==--y&&0===m&&D()}(e,r),t&&t(e,r)};var r,n=!0,i="c2e198bf77ed96839d8a",a={},o=[],d=[];function s(e){var t=j[e];if(!t)return P;var n=function(n){return t.hot.active?(j[n]?-1===j[n].parents.indexOf(e)&&j[n].parents.push(e):(o=[e],r=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),o=[]),P(n)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return P[e]},set:function(t){P[e]=t}}};for(var a in P)Object.prototype.hasOwnProperty.call(P,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(n,a,i(a));return n.e=function(e){return"ready"===p&&u("prepare"),m++,P.e(e).then(t,(function(e){throw t(),e}));function t(){m--,"prepare"===p&&(b[e]||k(e),0===m&&0===y&&D())}},n.t=function(e,t){return 1&t&&(e=n(e)),P.t(e,-2&t)},n}function l(t){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:r!==t,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)n._acceptedDependencies[e[r]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);t>=0&&n._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,p){case"idle":(f={})[t]=e[t],u("ready");break;case"ready":w(t);break;case"prepare":case"check":case"dispose":case"apply":(v=v||[]).push(t)}},check:E,apply:L,status:function(e){if(!e)return p;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:a[t]};return r=void 0,n}var c=[],p="idle";function u(e){p=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var h,f,g,v,y=0,m=0,b={},_={},S={};function I(e){return+e+""===e?+e:e}function E(e){if("idle"!==p)throw new Error("check() is only allowed in idle status");return n=e,u("check"),(t=1e4,t=t||1e4,new Promise((function(e,r){if("undefined"==typeof XMLHttpRequest)return r(new Error("No browser support"));try{var n=new XMLHttpRequest,a=P.p+""+i+".hot-update.json";n.open("GET",a,!0),n.timeout=t,n.send(null)}catch(e){return r(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)r(new Error("Manifest request to "+a+" timed out."));else if(404===n.status)e();else if(200!==n.status&&304!==n.status)r(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(n.responseText)}catch(e){return void r(e)}e(t)}}}))).then((function(e){if(!e)return u(O()?"ready":"idle"),null;_={},b={},S=e.c,g=e.h,u("prepare");var t=new Promise((function(e,t){h={resolve:e,reject:t}}));f={};return k(2),"prepare"===p&&0===m&&0===y&&D(),t}));var t}function k(e){S[e]?(_[e]=!0,y++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=P.p+""+e+"."+i+".hot-update.js",document.head.appendChild(t)}(e)):b[e]=!0}function D(){u("ready");var e=h;if(h=null,e)if(n)Promise.resolve().then((function(){return L(n)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var r in f)Object.prototype.hasOwnProperty.call(f,r)&&t.push(I(r));e.resolve(t)}}function L(t){if("ready"!==p)throw new Error("apply() is only allowed in ready status");return function t(n){var d,s,l,c,p;function h(e){for(var t=[e],r={},n=t.map((function(e){return{chain:[e],id:e}}));n.length>0;){var i=n.pop(),a=i.id,o=i.chain;if((c=j[a])&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:a};if(c.hot._main)return{type:"unaccepted",chain:o,moduleId:a};for(var d=0;d<c.parents.length;d++){var s=c.parents[d],l=j[s];if(l){if(l.hot._declinedDependencies[a])return{type:"declined",chain:o.concat([s]),moduleId:a,parentId:s};-1===t.indexOf(s)&&(l.hot._acceptedDependencies[a]?(r[s]||(r[s]=[]),y(r[s],[a])):(delete r[s],t.push(s),n.push({chain:o.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:r}}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];-1===e.indexOf(n)&&e.push(n)}}O();var m={},b=[],_={},E=function(){console.warn("[HMR] unexpected require("+D.moduleId+") to disposed module")};for(var k in f)if(Object.prototype.hasOwnProperty.call(f,k)){var D;p=I(k),D=f[k]?h(p):{type:"disposed",moduleId:k};var L=!1,w=!1,x=!1,A="";switch(D.chain&&(A="\nUpdate propagation: "+D.chain.join(" -> ")),D.type){case"self-declined":n.onDeclined&&n.onDeclined(D),n.ignoreDeclined||(L=new Error("Aborted because of self decline: "+D.moduleId+A));break;case"declined":n.onDeclined&&n.onDeclined(D),n.ignoreDeclined||(L=new Error("Aborted because of declined dependency: "+D.moduleId+" in "+D.parentId+A));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(D),n.ignoreUnaccepted||(L=new Error("Aborted because "+p+" is not accepted"+A));break;case"accepted":n.onAccepted&&n.onAccepted(D),w=!0;break;case"disposed":n.onDisposed&&n.onDisposed(D),x=!0;break;default:throw new Error("Unexception type "+D.type)}if(L)return u("abort"),Promise.reject(L);if(w)for(p in _[p]=f[p],y(b,D.outdatedModules),D.outdatedDependencies)Object.prototype.hasOwnProperty.call(D.outdatedDependencies,p)&&(m[p]||(m[p]=[]),y(m[p],D.outdatedDependencies[p]));x&&(y(b,[D.moduleId]),_[p]=E)}var M,C=[];for(s=0;s<b.length;s++)p=b[s],j[p]&&j[p].hot._selfAccepted&&_[p]!==E&&!j[p].hot._selfInvalidated&&C.push({module:p,parents:j[p].parents.slice(),errorHandler:j[p].hot._selfAccepted});u("dispose"),Object.keys(S).forEach((function(e){!1===S[e]&&function(e){delete installedChunks[e]}(e)}));var F,U,N=b.slice();for(;N.length>0;)if(p=N.pop(),c=j[p]){var T={},H=c.hot._disposeHandlers;for(l=0;l<H.length;l++)(d=H[l])(T);for(a[p]=T,c.hot.active=!1,delete j[p],delete m[p],l=0;l<c.children.length;l++){var B=j[c.children[l]];B&&((M=B.parents.indexOf(p))>=0&&B.parents.splice(M,1))}}for(p in m)if(Object.prototype.hasOwnProperty.call(m,p)&&(c=j[p]))for(U=m[p],l=0;l<U.length;l++)F=U[l],(M=c.children.indexOf(F))>=0&&c.children.splice(M,1);u("apply"),void 0!==g&&(i=g,g=void 0);for(p in f=void 0,_)Object.prototype.hasOwnProperty.call(_,p)&&(e[p]=_[p]);var G=null;for(p in m)if(Object.prototype.hasOwnProperty.call(m,p)&&(c=j[p])){U=m[p];var R=[];for(s=0;s<U.length;s++)if(F=U[s],d=c.hot._acceptedDependencies[F]){if(-1!==R.indexOf(d))continue;R.push(d)}for(s=0;s<R.length;s++){d=R[s];try{d(U)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:p,dependencyId:U[s],error:e}),n.ignoreErrored||G||(G=e)}}}for(s=0;s<C.length;s++){var q=C[s];p=q.module,o=q.parents,r=p;try{P(p)}catch(e){if("function"==typeof q.errorHandler)try{q.errorHandler(e)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:p,error:t,originalError:e}),n.ignoreErrored||G||(G=t),G||(G=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:p,error:e}),n.ignoreErrored||G||(G=e)}}if(G)return u("fail"),Promise.reject(G);if(v)return t(n).then((function(e){return b.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return u("idle"),new Promise((function(e){e(b)}))}(t=t||{})}function O(){if(v)return f||(f={}),v.forEach(w),v=void 0,!0}function w(t){Object.prototype.hasOwnProperty.call(f,t)||(f[t]=e[t])}var j={};function P(t){if(j[t])return j[t].exports;var r=j[t]={i:t,l:!1,exports:{},hot:l(t),parents:(d=o,o=[],d),children:[]};return e[t].call(r.exports,r,r.exports,s(t)),r.l=!0,r.exports}return P.m=e,P.c=j,P.d=function(e,t,r){P.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},P.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},P.t=function(e,t){if(1&t&&(e=P(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(P.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)P.d(r,n,function(t){return e[t]}.bind(null,n));return r},P.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return P.d(t,"a",t),t},P.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},P.p="",P.h=function(){return i},s("A5i7")(P.s="A5i7")}({"3XkX":function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||(extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),extendStatics,__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Driving=void 0;var policy_1=__importDefault(__webpack_require__("zgkH")),commad_1=__webpack_require__("cnic"),common_util_1=__webpack_require__("aLpa"),Driving=function(_super){function Driving(){var e=null!==_super&&_super.apply(this,arguments)||this;return e.policy=policy_1.default.DrivingPolicy.RECOMMEND,e.autoview=!0,e.features=[],e.startData=null,e.endData=null,e.routeIndex=1,e.drivingSource=null,e.drivingLayerId1="drivingLayerId1",e.drivingLayerId2="drivingLayerId2",e.drivingLayerId3="drivingLayerId3",e.drivingLayerId4="drivingLayerId4",e.drivingLayerBorderId1="drivingLayerBorderId1",e.drivingLayerborderId2="drivingLayerBorderId2",e.drivingLayerborderId3="drivingLayerBorderId3",e.drivingLayerborderId4="drivingLayerBorderId4",e.drivingSourceId="drivingSourceId1",e.lbsService=null,e}return __extends(Driving,_super),Driving.prototype.init=function(e,t,r,n){_super.prototype.init.call(this,e),this.features=[],this.routeIndex=1,this.startData=null,this.endData=null,this.autoview=!t||!t.autoview||t.autoview,this.policy=t&&t.policy?t.policy:policy_1.default.DrivingPolicy.RECOMMEND,this.initSourceAndLayer(),this.success=r,this.fail=n},Driving.prototype.setPolicy=function(e){this.policy!==e&&(this.policy=e,this.reSearch())},Driving.prototype.search=function(){var _this=this;if(this.innerClear(),null!=this.start&&null!=this.end){var ss=this.start.lng+","+this.start.lat,se=this.end.lng+","+this.end.lat,sp="";this.paths&&this.paths.length>0&&(this.paths.forEach((function(e){e.name&&(sp+=e.lng+","+e.lat+";")})),""!==sp&&(sp=sp.substr(0,sp.length-1))),this.routeIndex=1,this.startData=eval("["+ss+"]"),this.endData=eval("["+se+"]");var para={startPoint:ss,endPoint:se,wayPoints:sp,type:this.policy};null==this.lbsService?common_util_1.CommonUtil.getLbsData((function(e){_this.lbsService=e,_this.searchEx(e,para,_this.success,_this.fail)})):this.searchEx(this.lbsService,para,this.success,this.fail)}},Driving.prototype.searchEx=function(e,t,r,n){var i=this;e.driving(this.type,t,(function(e){"0"==e.code&&i.initData(e.data),r&&r(e.data)}),n)},Driving.prototype.initSourceAndLayer=function(){var e=this.mapObj;if(!e.getSource(this.drivingSourceId)){this.drivingSource=e.addSource(this.drivingSourceId,{type:"geojson",data:{type:"FeatureCollection",features:[]}})}var t=this.getSymbolLayerId();e.getLayer(this.drivingLayerborderId3)||e.addLayer(this.drivingLayerborderId3,this.drivingSourceId,{type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#989898","line-width":2,"line-gap-width":6},filter:["all",["==","mark",1],["==","hight",!1]]},t),e.getLayer(this.drivingLayerBorderId1)||e.addLayer(this.drivingLayerBorderId1,this.drivingSourceId,{type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#0d835e","line-width":2,"line-gap-width":6},filter:["all",["==","mark",1],["==","hight",!0]]},t),e.getLayer(this.drivingLayerborderId4)||e.addLayer(this.drivingLayerborderId4,this.drivingSourceId,{type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#A2A2A2","line-width":2,"line-gap-width":6},filter:["all",["==","mark",2],["==","hight",!1]]},t),e.getLayer(this.drivingLayerborderId2)||e.addLayer(this.drivingLayerborderId2,this.drivingSourceId,{type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#0d835e","line-width":2,"line-gap-width":6},filter:["all",["==","mark",2],["==","hight",!0]]},t),e.getLayer(this.drivingLayerId3)||e.addLayer(this.drivingLayerId3,this.drivingSourceId,{type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#A2A2A2","line-width":7},filter:["all",["==","mark",1],["==","hight",!1]]},t),e.getLayer(this.drivingLayerId1)||e.addLayer(this.drivingLayerId1,this.drivingSourceId,{type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":{property:"status",stops:[[0,"#10bc61"],[1,"#10bc61"],[2,"#ffa200"],[3,"#f14b4b"],[4,"#10bc61"]]},"line-width":7},filter:["all",["==","mark",1],["==","hight",!0]]},t),e.getLayer(this.drivingLayerId4)||e.addLayer(this.drivingLayerId4,this.drivingSourceId,{type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#A2A2A2","line-width":5,"line-dasharray":[2,2]},filter:["all",["==","mark",2],["==","hight",!1]]},t),e.getLayer(this.drivingLayerId2)||e.addLayer(this.drivingLayerId2,this.drivingSourceId,{type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#33cc00","line-width":5,"line-dasharray":[2,2]},filter:["all",["==","mark",2],["==","hight",!0]]},t)},Driving.prototype.initData=function(e){this.features=[];var t=this.startData,r=this.endData;if(t&&r&&2==t.length&&2==r.length&&e.rows)for(var n=0;n<e.rows.length;n++){var i=!1;if(0==n)i=!0;else{if(n>=3)return;i=!1}this.handlePath(e.rows[n],t,r,i,n+1)}},Driving.prototype.getTmcFeature=function(e,t,r){if(!e)return null;var n=parseInt(e.level||0),i=(e.route||"").split(";"),a=[];return i.map((function(e){if(e&&e.indexOf(",")>=0){var t=e.split(",");a.push([parseFloat(t[0]),parseFloat(t[1])])}})),a.length<2?null:{type:"Feature",geometry:{type:"LineString",coordinates:a},properties:{routeIndex:r,hight:t,mark:1,status:n}}},Driving.prototype.getSymbolLayerId=function(){var e="",t=this.mapObj.getAllLayer();if(t.length>0)for(var r=0;r<t.length;r++)if("symbol"===t[r].getType()){e=t[r].getId();break}return e},Driving.prototype.handlePath=function(e,t,r,n,i){var a=this;if(e){var o=[];if((e.item||[]).map((function(e){(e.tmc||[]).map((function(e){var t=a.getTmcFeature(e,n,i);t&&(a.features.push(t),o.push(t.geometry.coordinates))}))})),o.length>2){var d={type:"Feature",geometry:{type:"LineString",coordinates:[t,o[0][0]]},properties:{routeIndex:i,hight:n,mark:2}};this.features.push(d);var s={type:"Feature",geometry:{type:"LineString",coordinates:[o[o.length-1][o[o.length-1].length-1],r]},properties:{routeIndex:i,hight:n,mark:2}};this.features.push(s);var l={type:"FeatureCollection",features:this.features};this.drivingSource.setData(l),this.autoview&&this.fitBounds(l)}}},Driving.prototype.fitBounds=function(e){var t=this;common_util_1.CommonUtil.getGeojsonBounds(e,(function(e){t.mapObj.fitBounds({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]},{padding:100})}))},Driving.prototype.innerClear=function(){this.mapObj&&(this.features=[],this.routeIndex=1,this.startData=null,this.endData=null,this.drivingSource&&this.drivingSource.setData({type:"FeatureCollection",features:this.features}))},Driving.prototype.setScheme=function(e){if(this.routeIndex!==e&&(this.mapObj&&this.drivingSource)){for(var t=this.features,r=0;r<t.length;r++){var n=t[r];n.properties.routeIndex==e?n.properties.hight=!0:n.properties.hight=!1}this.drivingSource.setData({type:"FeatureCollection",features:this.features}),this.routeIndex=e}},Driving}(commad_1.CommadService);exports.Driving=Driving},A5i7:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r("Ukcs");var a=r("3XkX");i(r("3XkX"),t),map.Container.set("Driving",new a.Driving)},Ukcs:function(e,t){},aLpa:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommonUtil=void 0;var n=function(){function e(){}return e.reverseGeoCodeSearch=function(e,t,r,n,i){map.Factory.GeocodeData((function(a){a.reverseGeoCodeSearch(e,{location:t+","+r},(function(e){var t={};"0"==e.code&&(t=e.data),n&&n(t)}),(function(){i&&i()}))}))},e.getGeojsonBounds=function(e,t){map.Factory.Utils("GeojsonUtils",(function(r){var n=r.getGeojsonBoundingBox(e);t&&t(n)}))},e.getMap=function(){return map.Container.get("map")},e.getMarkerManage=function(){return map.Factory.MarkerManage()},e.getLbsData=function(e){map.Factory.LbsData((function(t){e(t)}))},e}();t.CommonUtil=n},cnic:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommadService=void 0;var n=r("aLpa"),i=function(){function e(){this.startAdding=!1,this.endAdding=!1,this.pathAdding=!1,this.pathID=0,this.paths=null,this.type="",this.mapStartEvent=null,this.mapEndEvent=null,this.mapPathEvent=null}return e.prototype.init=function(e){this.type=e,this.mapObj=n.CommonUtil.getMap();var t=this;this.mapObj.on("click",(function(e){var r=e.lngLat;t.startAdding?(t.startAdding=!1,n.CommonUtil.reverseGeoCodeSearch(t.type,r.lng,r.lat,(function(e){var n=t.getPointName(e);if(t.updateStart(n,r.lng,r.lat,{callback:t.mapStartEvent}),t.mapStartEvent){var i={};i.name=n,i.lng=r.lng,i.lat=r.lat,t.mapStartEvent(i)}}))):t.endAdding?(t.endAdding=!1,n.CommonUtil.reverseGeoCodeSearch(t.type,r.lng,r.lat,(function(e){var n=t.getPointName(e);if(t.updateEnd(n,r.lng,r.lat,{callback:t.mapEndEvent}),t.mapEndEvent){var i={};i.name=n,i.lng=r.lng,i.lat=r.lat,t.mapEndEvent(i)}}))):t.pathAdding&&(t.pathAdding=!1,n.CommonUtil.reverseGeoCodeSearch(t.type,r.lng,r.lat,(function(e){var n=t.getPointName(e);if(t.updatePath(t.pathID,n,r.lng,r.lat,{callback:t.mapPathEvent}),t.mapPathEvent){var i={};i.name=n,i.lng=r.lng,i.lat=r.lat,i.id=t.pathID,t.mapPathEvent(i)}})))}))},e.prototype.getPointName=function(e){return(e.city||"")+(e.country||"")+(e.roadname||"")+(e.poiName||"")||""},e.prototype.updateStart=function(e,t,r,n){null==e?(this.start&&this.start.marker&&this.start.marker.remove(),this.start=null):this.start?(this.start.name=""===e?"未知路段":e,this.start.lng=t,this.start.lat=r,this.start.marker.update([t,r])):(this.start={},this.start.name=""===e?"未知路段":e,this.start.lng=t,this.start.lat=r,this.createStartMarker(n)),this.reSearch()},e.prototype.createStartMarker=function(e){var t=document.createElement("div");t.className="lbs-port-start";var r={dom:t,offset:[0,-15],draggable:!0,callback:function(e){}};map.Factory.copy(e||{},r,!0);var i=n.CommonUtil.getMarkerManage(),a=this,o=i.add("lbs-port-start",[this.start.lng,this.start.lat],{element:r.dom,offset:r.offset,draggable:r.draggable,dragendEvent:function(e){a.start.lng=e[0],a.start.lat=e[1],n.CommonUtil.reverseGeoCodeSearch(a.type,e[0],e[1],(function(t){var n=a.getPointName(t);if(a.start.name=""===n?"未知路段":n,r.callback){var i={};i.name=a.start.name,i.lng=e[0],i.lat=e[1],r.callback(i)}})),a.reSearch()}});this.start.marker=o},e.prototype.updateEnd=function(e,t,r,n){null==e?(this.end&&this.end.marker&&this.end.marker.remove(),this.end=null):this.end?(this.end.name=""===e?"未知路段":e,this.end.lng=t,this.end.lat=r,this.end.marker.update([t,r])):(this.end={},this.end.name=""===e?"未知路段":e,this.end.lng=t,this.end.lat=r,this.createEndMarker(n)),this.reSearch()},e.prototype.createEndMarker=function(e){var t=document.createElement("div");t.className="lbs-port-end";var r={dom:t,offset:[0,-15],draggable:!0,callback:function(e){}};map.Factory.copy(e||{},r,!0);var i=n.CommonUtil.getMarkerManage(),a=this,o=i.add("lbs-port-end",[this.end.lng,this.end.lat],{element:r.dom,offset:r.offset,draggable:r.draggable,dragendEvent:function(e){a.end.lng=e[0],a.end.lat=e[1],n.CommonUtil.reverseGeoCodeSearch(a.type,e[0],e[1],(function(t){var n=a.getPointName(t);if(a.end.name=""===n?"未知路段":n,r.callback){var i={};i.name=a.end.name,i.lng=e[0],i.lat=e[1],r.callback(i)}})),a.reSearch()}});this.end.marker=o},e.prototype.addPath=function(e,t,r,n){this.paths||(this.paths=[]);var i=1;this.paths.length>0&&(i=this.paths[this.paths.length-1].id+1);var a={id:i,name:e,lng:t,lat:r};this.paths.push(a),a.name&&(this.createPathMarker(a,n),this.reSearch())},e.prototype.updatePath=function(e,t,r,n,i){if(this.paths){var a=null;this.paths.forEach((function(t){t.id===e&&(a=t)})),a&&(a.name=""===t?"未知路段":t,a.lng=r,a.lat=n,null==t?a.marker&&a.marker.remove():a.marker?a.marker.update([r,n]):this.createPathMarker(a,i),this.reSearch())}},e.prototype.delPath=function(e){if(this.paths){var t=null;this.paths.forEach((function(r){r.id===e&&(t=r)})),t&&(this.paths.splice(this.paths.indexOf(t),1),t.marker&&(t.marker.remove(),this.reSearch()))}},e.prototype.delPaths=function(){if(this.paths){var e=!1;this.paths.forEach((function(t){t.marker&&(t.marker.remove(),e=!0)})),this.paths=null,e&&this.reSearch()}},e.prototype.createPathMarker=function(e,t){var r=document.createElement("div");r.className="lbs-port-waypoint";var i={dom:r,offset:[0,-15],draggable:!0,callback:function(e){}};map.Factory.copy(t||{},i,!0);var a=this,o=n.CommonUtil.getMarkerManage().add(e.id,[e.lng,e.lat],{element:i.dom,offset:i.offset,draggable:i.draggable,dragendEvent:function(t){e.lng=t[0],e.lat=t[1],n.CommonUtil.reverseGeoCodeSearch(a.type,t[0],t[1],(function(r){var n=a.getPointName(r);if(e.name=""===n?"未知路段":n,i.callback){var o={};o.name=e.name,o.lng=t[0],o.lat=t[1],o.id=e.id,i.callback(o)}})),a.reSearch()}});e.marker=o},e.prototype.reSearch=function(){this.start&&this.end?this.search():this.innerClear()},e.prototype.mapStart=function(e){this.startAdding=!0,this.endAdding=!1,this.pathAdding=!1,e&&(this.mapStartEvent=e)},e.prototype.mapEnd=function(e){this.startAdding=!1,this.endAdding=!0,this.pathAdding=!1,e&&(this.mapEndEvent=e)},e.prototype.mapPath=function(e,t){this.startAdding=!1,this.endAdding=!1,this.pathAdding=!0,this.pathID=e,t&&(this.mapPathEvent=t)},e.prototype.clearMapOption=function(){this.startAdding=!1,this.endAdding=!1,this.pathAdding=!1},e.prototype.search=function(){},e.prototype.clear=function(){this.updateStart(null,0,0),this.updateEnd(null,0,0),this.delPaths(),this.innerClear()},e.prototype.innerClear=function(){},e.prototype.localByRoute=function(e){var t=this,r=e.split(";"),i=[];if(r.map((function(e){if(e&&e.indexOf(",")>=0){var t=e.split(",");i.push([parseFloat(t[0]),parseFloat(t[1])])}})),i.length>=2){var a={type:"Feature",geometry:{type:"LineString",coordinates:i}};n.CommonUtil.getGeojsonBounds(a,(function(e){t.mapObj.fitBounds({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]},{padding:100})}))}},e.prototype.localByPoint=function(e,t,r){void 0===r&&(r=16);var n=this.mapObj.getZoom(),i=n>r?n:r;this.mapObj.easeTo({center:[e,t],zoom:i})},e}();t.CommadService=i},zgkH:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.DrivingPolicy={RECOMMEND:0,LEAST_DISTANCE:1,FIRST_TRAFFIC:2,ECONOMY:3,OFTEN_WALK:4,BEST_OFTEN_WALK:5,ALL:6},e.TransferPolicy={LEAST_TIME:0,LEAST_TRANSFER:1,ONLY_METRO:2,LEAST_WALK:3,NO_METRO:4},e}();t.default=n}})}));